var background=(function(){"use strict";function c(e){return e==null||typeof e=="function"?{main:e}:e}const i=c(()=>{chrome.runtime.onMessage.addListener((e,a,s)=>{if(e.action==="proxyFetchFile"){const{url:l,token:d}=e;return fetch(l,{headers:{Authorization:`Bearer ${d}`}}).then(r=>{if(!r.ok)throw new Error("Network response was not ok");return r.blob()}).then(r=>{const t=new FileReader;t.onloadend=()=>{s({success:!0,base64:t.result})},t.readAsDataURL(r)}).catch(r=>{console.error("[RAE Background] Fetch failed:",r),s({success:!1,error:r.message})}),!0}})});function h(){}globalThis.browser?.runtime?.id?globalThis.browser:globalThis.chrome;function n(e,...a){}const u={debug:(...e)=>n(console.debug,...e),log:(...e)=>n(console.log,...e),warn:(...e)=>n(console.warn,...e),error:(...e)=>n(console.error,...e)};let o;try{o=i.main(),o instanceof Promise&&console.warn("The background's main() function return a promise, but it must be synchronous")}catch(e){throw u.error("The background crashed on startup!"),e}return o})();
