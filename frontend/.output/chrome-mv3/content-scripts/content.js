var content=(function(){"use strict";function I(o){return o}const k={matches:["<all_urls>"],runAt:"document_idle",main(){function o(e){const c=e.id?.toLowerCase()||"",i=e.name?.toLowerCase()||"",a=e.placeholder?.toLowerCase()||"",h=e.getAttribute("aria-label")?.toLowerCase()||"",l=t(e)?.toLowerCase()||"",f=`${c} ${i} ${a} ${h} ${l}`,r=[{keywords:["firstname","first-name","first_name","fname","givenname"],type:"firstName",confidence:.9},{keywords:["lastname","last-name","last_name","lname","surname","familyname"],type:"lastName",confidence:.9},{keywords:["email","e-mail","emailaddress"],type:"email",confidence:.9},{keywords:["phone","telephone","mobile","phonenumber","tel"],type:"phone",confidence:.9},{keywords:["address","street","addressline"],type:"streetAddress",confidence:.8},{keywords:["city","town"],type:"city",confidence:.8},{keywords:["country","nation"],type:"country",confidence:.8},{keywords:["location","residence"],type:"location",confidence:.7},{keywords:["summary","about","bio","profile","objective"],type:"professionalSummary",confidence:.7},{keywords:["skill","expertise","competenc"],type:"skills",confidence:.7},{keywords:["jobtitle","job-title","position","role","title"],type:"jobTitle",confidence:.8},{keywords:["company","employer","organization","organisation"],type:"companyName",confidence:.8},{keywords:["school","university","college","institution"],type:"schoolName",confidence:.8},{keywords:["degree","major","field","study","discipline"],type:"fieldOfStudy",confidence:.8},{keywords:["project","portfolio"],type:"projectName",confidence:.7},{keywords:["linkedin","github","website","url","link","portfolio"],type:"link",confidence:.6}];for(const p of r)for(const u of p.keywords)if(f.includes(u))return{type:p.type,confidence:p.confidence};return{type:"unknown",confidence:0}}function t(e){if(e.id){const a=document.querySelector(`label[for="${e.id}"]`);if(a)return a.textContent}const c=e.closest("label");if(c)return c.textContent;const i=e.previousElementSibling;return i?.tagName==="LABEL"?i.textContent:null}function n(){const e=[];return document.querySelectorAll("input, textarea, select").forEach(i=>{if(i instanceof HTMLInputElement||i instanceof HTMLTextAreaElement||i instanceof HTMLSelectElement){if(i instanceof HTMLInputElement&&(i.type==="submit"||i.type==="button"||i.type==="hidden"))return;const{type:a,confidence:h}=o(i);h>.5&&e.push({element:i,type:a,confidence:h})}}),e}function s(e,c){const i=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value")?.set,a=Object.getOwnPropertyDescriptor(window.HTMLTextAreaElement.prototype,"value")?.set;e instanceof HTMLInputElement&&i?i.call(e,c):e instanceof HTMLTextAreaElement&&a?a.call(e,c):e.value=c,e.dispatchEvent(new Event("input",{bubbles:!0})),e.dispatchEvent(new Event("change",{bubbles:!0})),e.dispatchEvent(new Event("blur",{bubbles:!0}))}async function d(e,c){try{const i=await chrome.storage.local.get(["auth_token"]);if(!i.auth_token)return;const a=(await chrome.storage.local.get(["api_url"])).api_url||"http://localhost:3000",l=await fetch(`${a}${c==="resume"?"/api/resume/view":"/api/cv/view"}`,{headers:{Authorization:`Bearer ${i.auth_token}`}});if(!l.ok)return;const f=await l.blob(),r=c==="resume"?"resume.pdf":"cover-letter.pdf",p=new File([f],r,{type:"application/pdf"}),u=new DataTransfer;u.items.add(p),e.files=u.files,e.dispatchEvent(new Event("change",{bubbles:!0}))}catch(i){console.error(`Failed to upload ${c}:`,i)}}function v(e,c){const i=n();let a=0;return i.forEach(({element:l,type:f})=>{let r="";switch(f){case"firstName":r=e.firstName;break;case"lastName":r=e.lastName;break;case"email":r=e.email;break;case"phone":r=e.phone;break;case"streetAddress":r=e.streetAddress;break;case"city":r=e.city;break;case"country":r=e.country;break;case"location":r=e.location;break;case"professionalSummary":r=e.professionalSummary;break;case"skills":r=e.skills.join(", ");break;case"jobTitle":r=e.experience[0]?.jobTitle||"";break;case"companyName":r=e.experience[0]?.companyName||"";break;case"schoolName":r=e.education[0]?.schoolName||"";break;case"fieldOfStudy":r=e.education[0]?.fieldOfStudy||"";break;case"projectName":r=e.projects[0]?.projectName||"";break;case"link":r=e.projects[0]?.link||"";break}(r&&l instanceof HTMLInputElement||l instanceof HTMLTextAreaElement)&&(s(l,r),a++)}),document.querySelectorAll('input[type="file"]').forEach(async l=>{const f=t(l)?.toLowerCase()||"",r=l.id?.toLowerCase()||"",p=l.name?.toLowerCase()||"",u=`${f} ${r} ${p}`;u.includes("resume")||u.includes("cv")?(await d(l,"resume"),a++):c&&(u.includes("cover")||u.includes("letter"))&&(await d(l,"coverLetter"),a++)}),a}chrome.runtime.onMessage.addListener((e,c,i)=>{if(e.action==="autofill"){const a=v(e.resumeData,e.cvAvailable);i({success:!0,filledCount:a})}else if(e.action==="detectFields"){const a=n();i({success:!0,fieldCount:a.length})}return!0}),console.log("RAE Autofill content script loaded")}},E=globalThis.browser?.runtime?.id?globalThis.browser:globalThis.chrome;function b(o,...t){}const S={debug:(...o)=>b(console.debug,...o),log:(...o)=>b(console.log,...o),warn:(...o)=>b(console.warn,...o),error:(...o)=>b(console.error,...o)};class y extends Event{constructor(t,n){super(y.EVENT_NAME,{}),this.newUrl=t,this.oldUrl=n}static EVENT_NAME=g("wxt:locationchange")}function g(o){return`${E?.runtime?.id}:content:${o}`}function T(o){let t,n;return{run(){t==null&&(n=new URL(location.href),t=o.setInterval(()=>{let s=new URL(location.href);s.href!==n.href&&(window.dispatchEvent(new y(s,n)),n=s)},1e3))}}}class w{constructor(t,n){this.contentScriptName=t,this.options=n,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}static SCRIPT_STARTED_MESSAGE_TYPE=g("wxt:content-script-started");isTopFrame=window.self===window.top;abortController;locationWatcher=T(this);receivedMessageIds=new Set;get signal(){return this.abortController.signal}abort(t){return this.abortController.abort(t)}get isInvalid(){return E.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(t){return this.signal.addEventListener("abort",t),()=>this.signal.removeEventListener("abort",t)}block(){return new Promise(()=>{})}setInterval(t,n){const s=setInterval(()=>{this.isValid&&t()},n);return this.onInvalidated(()=>clearInterval(s)),s}setTimeout(t,n){const s=setTimeout(()=>{this.isValid&&t()},n);return this.onInvalidated(()=>clearTimeout(s)),s}requestAnimationFrame(t){const n=requestAnimationFrame((...s)=>{this.isValid&&t(...s)});return this.onInvalidated(()=>cancelAnimationFrame(n)),n}requestIdleCallback(t,n){const s=requestIdleCallback((...d)=>{this.signal.aborted||t(...d)},n);return this.onInvalidated(()=>cancelIdleCallback(s)),s}addEventListener(t,n,s,d){n==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),t.addEventListener?.(n.startsWith("wxt:")?g(n):n,s,{...d,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),S.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:w.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:Math.random().toString(36).slice(2)},"*")}verifyScriptStartedEvent(t){const n=t.data?.type===w.SCRIPT_STARTED_MESSAGE_TYPE,s=t.data?.contentScriptName===this.contentScriptName,d=!this.receivedMessageIds.has(t.data?.messageId);return n&&s&&d}listenForNewerScripts(t){let n=!0;const s=d=>{if(this.verifyScriptStartedEvent(d)){this.receivedMessageIds.add(d.data.messageId);const v=n;if(n=!1,v&&t?.ignoreFirstEvent)return;this.notifyInvalidated()}};addEventListener("message",s),this.onInvalidated(()=>removeEventListener("message",s))}}function A(){}function m(o,...t){}const L={debug:(...o)=>m(console.debug,...o),log:(...o)=>m(console.log,...o),warn:(...o)=>m(console.warn,...o),error:(...o)=>m(console.error,...o)};return(async()=>{try{const{main:o,...t}=k,n=new w("content",t);return await o(n)}catch(o){throw L.error('The content script "content" crashed on startup!',o),o}})()})();
content;